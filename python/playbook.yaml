---
- hosts: 127.0.0.1
  become: true
  tasks:
    - apt: update_cache=yes  
    
    - name: Install python2, python3, build-essential
      apt:
        name:
          - python2
          - python2-dev
          - python-tk
          - python3
          - python3-dev
          - python3-pip
          - python3-setuptools
          - python3-tk
          - ipython3
          - build-essential
        state: present
        update_cache: yes


    - name: Download get-pip
      ansible.builtin.get_url:
        url: https://bootstrap.pypa.io/pip/2.7/get-pip.py
        dest: /tmp/get-pip.py
        mode: '0777'

    - name: Installing python2 pip
      become_user: codio
      shell: python2 /tmp/get-pip.py


    - name: Installing python2 pip packages
      become_user: codio
      shell: python2 -m pip install --user numpy scipy matplotlib pycodestyle pygame
        
    - name: Installing python3 libs     
      become_user: codio
      shell: pip3 install --user numpy scipy matplotlib pycodestyle pygame
        
    - name: Correct python version selected
      ansible.builtin.file:
        src: /usr/bin/python3
        dest: /usr/bin/python
        owner: root
        group: root
        state: link
